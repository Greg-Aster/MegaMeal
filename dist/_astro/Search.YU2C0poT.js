import{o as le,a as ne,I as N,i as se,s as O,r as P,h as ie}from"./Icon.BIJLpCOA.js";import{G as oe,w as S,H as fe,i as h,n as Z,I as ce,J as V,K as F,L as D,M as L,N as ue,O as $,P as j,Q as de,R as Y,T as ee,C as K,V as ve,W as he,z as W,F as pe,X as me,Y as be,Z as ge,_ as _e,$ as xe,a0 as ke,a1 as we,a2 as ye,p as Ie,l as X,k as Ee,t as ae,a3 as Te,a as q,e as z,b as G,f as Ae,h as C,s as T,c as A,m as H,r as M,j as Me}from"./render.Dwif6reE.js";import{b as J}from"./input.BdEKDfRA.js";import{u as Q}from"./url-utils.BPGgdnjJ.js";import{I as Re}from"./zh_TW.BSGpsz4g.js";function Se(e,t){return t}function Le(e,t,a,s){for(var n=[],l=t.length,r=0;r<l;r++)be(t[r].e,n,!0);var i=l>0&&0===n.length&&null!==a;if(i){var o=a.parentNode;ge(o),o.append(a),s.clear(),y(e,t[0].prev,t[l-1].next)}_e(n,(()=>{for(var a=0;a<l;a++){var n=t[a];i||(s.delete(n.k),y(e,n.prev,n.next)),xe(n.e,!i)}}))}function Ne(e,t,a,s,n,l=null){var r=e,i={items:new Map,first:null};S&&fe();var o=null,c=!1,d=Z((()=>{var e=a();return pe(e)?e:null==e?[]:ee(e)}));oe((()=>{var e=h(d),u=e.length;if(c&&0===u)return;c=0===u;let f=!1;S&&(r.data===ce!==(0===u)&&(r=V(),F(r),D(!1),f=!0));if(S){for(var v,p=null,g=0;g<u;g++){if(8===L.nodeType&&L.data===ue){r=L,f=!0,D(!1);break}var b=e[g],m=s(b,g);v=te(L,i,p,null,b,m,g,n,t,a),i.items.set(m,v),p=v}u>0&&F(V())}S||Ce(e,i,r,n,t,s,a),null!==l&&(0===u?o?$(o):o=j((()=>l(r))):null!==o&&de(o,(()=>{o=null}))),f&&D(!0),h(d)})),S&&(r=L)}function Ce(e,t,a,s,n,l,r){var i,o,c,h,d,u=e.length,f=t.items,v=t.first,p=null,g=[],b=[];for(d=0;d<u;d+=1)if(c=l(o=e[d],d),void 0!==(h=f.get(c))){if(He(h,o,d),h.e.f&Y&&$(h.e),h!==v){if(void 0!==i&&i.has(h)){if(g.length<b.length){var m,x=b[0];p=x.prev;var w=g[0],k=g[g.length-1];for(m=0;m<g.length;m+=1)U(g[m],x,a);for(m=0;m<b.length;m+=1)i.delete(b[m]);y(t,w.prev,k.next),y(t,p,w),y(t,k,x),v=x,p=k,d-=1,g=[],b=[]}else i.delete(h),U(h,v,a),y(t,h.prev,h.next),y(t,h,null===p?t.first:p.next),y(t,p,h),p=h;continue}for(g=[],b=[];null!==v&&v.k!==c;)v.e.f&Y||(i??=new Set).add(v),b.push(v),v=v.next;if(null===v)continue;h=v}g.push(h),p=h,v=h.next}else{p=te(v?v.e.nodes_start:a,t,p,null===p?t.first:p.next,o,c,d,s,n,r),f.set(c,p),g=[],b=[],v=p.next}if(null!==v||void 0!==i){for(var L=void 0===i?[]:ee(i);null!==v;)v.e.f&Y||L.push(v),v=v.next;if(L.length>0){Le(t,L,null,f)}}K.first=t.first&&t.first.e,K.last=p&&p.e}function He(e,t,a,s){ve(e.v,t),e.i=a}function te(e,t,a,s,n,l,r,i,o,c){var h=!!(o&ke)?!(o&we)?he(n):W(n):n,d=o&me?W(r):r,u={i:d,v:h,k:l,a:null,e:null,prev:a,next:s};try{return u.e=j((()=>i(e,h,d,c)),S),u.e.prev=a&&a.e,u.e.next=s&&s.e,null===a?t.first=u:(a.next=u,a.e.next=u.e),null!==s&&(s.prev=u,s.e.prev=u.e),u}finally{}}function U(e,t,a){for(var s=e.next?e.next.e.nodes_start:a,n=t?t.e.nodes_start:a,l=e.e.nodes_start;l!==s;){var r=ye(l);n.before(l),l=r}}function y(e,t,a){null===t?e.first=a:(t.next=a,t.e.next=a&&a.e),null!==a&&(a.prev=t,a.e.prev=t&&t.e)}var Be=ae('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block\n       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>'),De=ae('<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg\n      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0\n         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1gu5h8y"></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]\ntop-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl\n      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0\n               focus:w-60 text-black/50 dark:text-white/50 svelte-1gu5h8y"></div> <!></div>',1);function We(e,t){Ie(t,!1);let a=H(""),s=H(""),n=H([]);Q("/"),Q("/");let l=H(((e,t)=>{}));le((()=>{C(l,(async(e,t)=>{let a=document.getElementById("search-panel");if(!a)return;if(!e&&t)return void a.classList.add("float-panel-closed");let s=[];{const t=await pagefind.search(e);for(const e of t.results)s.push(await e.data())}s.length||!t?(t&&a.classList.remove("float-panel-closed"),C(n,s)):a.classList.add("float-panel-closed")}))}));X((()=>(h(l),h(a))),(()=>{h(l)(h(a),!0)})),X((()=>(h(l),h(s))),(()=>{h(l)(h(s),!1)})),Ee(),ne();var r=De(),i=Te(r),o=A(i);N(o,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var c=T(o,2);P(c),M(i);var d=T(i,2),u=A(d);N(u,{icon:"material-symbols:search",class:"text-[1.25rem]"}),M(d);var f=T(d,2),v=A(f),p=A(v);N(p,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var g=T(p,2);P(g),M(v),Ne(T(v,2),1,(()=>h(n)),Se,((e,t)=>{var a=Be(),s=A(a),n=A(s,!0),l=T(n);N(l,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),M(s);var r=T(s,2),i=A(r);ie(i,(()=>h(t).excerpt),!1,!1),M(r),M(a),q((()=>{O(a,"href",h(t).url),Me(n,h(t).meta.title)})),G(e,a)})),M(f),q((e=>O(c,"placeholder",e)),[()=>se(Re.search)],Z),J(c,(()=>h(a)),(e=>C(a,e))),z("focus",c,(()=>h(l)(h(a),!0))),z("click",d,(()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")})),J(g,(()=>h(s)),(e=>C(s,e))),G(e,r),Ae()}export{We as default};